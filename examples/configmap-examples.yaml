# Example ConfigMap configurations for the nested virtualization webhook

# Example 1: Enable nested virtualization for all VMs in specific namespaces
apiVersion: v1
kind: ConfigMap
metadata:
  name: nested-virt-config
  namespace: harvester-nested-virt
data:
  # Enable for all VMs in the dev namespace
  dev: ".*"
  # Enable for VMs starting with 'test-' in the testing namespace
  testing: "^test-.*"

---
# Example 2: Enable for specific VM name patterns
apiVersion: v1
kind: ConfigMap
metadata:
  name: nested-virt-config
  namespace: harvester-nested-virt
data:
  # Only VMs starting with 'vm-' or 'nested-'
  default: "^vm-.*,^nested-.*"
  # Production VMs ending with '-prod'
  production: ".*-prod$"
  # Staging VMs with 'staging' in the name
  staging: ".*staging.*"

---
# Example 3: Complex patterns
apiVersion: v1
kind: ConfigMap
metadata:
  name: nested-virt-config
  namespace: harvester-nested-virt
data:
  # Multiple namespaces with different patterns
  dev-team-1: "^dev-.*,^test-.*"
  dev-team-2: "^app-.*"
  qa: "^qa-vm-[0-9]+$"
  # Match VMs with specific prefixes or suffixes
  infrastructure: "^kvm-.*,.*-hypervisor$"

---
# Example 4: Whitelist specific VMs
apiVersion: v1
kind: ConfigMap
metadata:
  name: nested-virt-config
  namespace: harvester-nested-virt
data:
  # Exact VM names (using anchors)
  critical: "^vm-docker-1$,^vm-k8s-master$,^vm-nested-lab$"
  # VMs numbered from 1-99
  development: "^dev-vm-[1-9][0-9]?$"
