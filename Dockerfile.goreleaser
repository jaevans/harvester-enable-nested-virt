# Dockerfile for GoReleaser builds
# GoReleaser will provide the pre-built binary
FROM alpine:3.19

RUN apk --no-cache add ca-certificates

WORKDIR /app

# Copy the pre-built binary from GoReleaser
COPY webhook /app/webhook

# Run as non-root user
RUN addgroup -g 1000 webhook && \
    adduser -D -u 1000 -G webhook webhook && \
    chown -R webhook:webhook /app

USER webhook

ENTRYPOINT ["/app/webhook"]
